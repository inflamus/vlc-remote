!function(a){"use strict";var c=(a.module("VLCRemote",["ngTouch","pascalprecht.translate"]).config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]).config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"js/locales/",suffix:".json"}).registerAvailableLanguageKeys(["af","am","ar","as","az","ba","be","bg","bn","bo","br","bs","ca","co","cs","cy","da","de","ds","dv","el","en","es","et","eu","fa","fi","fo","fr","fy","ga","gd","gl","gs","gu","ha","he","hi","hr","hs","hu","hy","id","ig","ii","is","it","iu","ja","ka","kk","kl","km","kn","ko","ky","lb","lo","lt","lv","mi","mk","ml","mn","mo","mr","ms","mt","nb","ne","nl","nn","ns","oc","or","pa","pl","pr","ps","pt","qu","rm","ro","ru","rw","sa","se","si","sk","sl","sm","sq","sr","sv","sw","sy","ta","te","tg","th","tk","tn","tr","tt","tz","ug","uk","ur","uz","vi","wo","xh","yo","zh","zu"],{"af_*":"af","am_*":"am","ar_*":"ar","as_*":"as","az_*":"az","ba_*":"ba","be_*":"be","bg_*":"bg","bn_*":"bn","bo_*":"bo","br_*":"br","bs_*":"bs","ca_*":"ca","co_*":"co","cs_*":"cs","cy_*":"cy","da_*":"da","de_*":"de","ds_*":"ds","dv_*":"dv","el_*":"el","en_*":"en","es_*":"es","et_*":"et","eu_*":"eu","fa_*":"fa","fi_*":"fi","fo_*":"fo","fr_*":"fr","fy_*":"fy","ga_*":"ga","gd_*":"gd","gl_*":"gl","gs_*":"gs","gu_*":"gu","ha_*":"ha","he_*":"he","hi_*":"hi","hr_*":"hr","hs_*":"hs","hu_*":"hu","hy_*":"hy","id_*":"id","ig_*":"ig","ii_*":"ii","is_*":"is","it_*":"it","iu_*":"iu","ja_*":"ja","ka_*":"ka","kk_*":"kk","kl_*":"kl","km_*":"km","kn_*":"kn","ko_*":"ko","ky_*":"ky","lb_*":"lb","lo_*":"lo","lt_*":"lt","lv_*":"lv","mi_*":"mi","mk_*":"mk","ml_*":"ml","mn_*":"mn","mo_*":"mo","mr_*":"mr","ms_*":"ms","mt_*":"mt","nb_*":"nb","ne_*":"ne","nl_*":"nl","nn_*":"nn","ns_*":"ns","oc_*":"oc","or_*":"or","pa_*":"pa","pl_*":"pl","pr_*":"pr","ps_*":"ps","pt_*":"pt","qu_*":"qu","rm_*":"rm","ro_*":"ro","ru_*":"ru","rw_*":"rw","sa_*":"sa","se_*":"se","si_*":"si","sk_*":"sk","sl_*":"sl","sm_*":"sm","sq_*":"sq","sr_*":"sr","sv_*":"sv","sw_*":"sw","sy_*":"sy","ta_*":"ta","te_*":"te","tg_*":"tg","th_*":"th","tk_*":"tk","tn_*":"tn","tr_*":"tr","tt_*":"tt","tz_*":"tz","ug_*":"ug","uk_*":"uk","ur_*":"ur","uz_*":"uz","vi_*":"vi","wo_*":"wo","xh_*":"xh","yo_*":"yo","zh_*":"zh","zu_*":"zu"}).determinePreferredLanguage().fallbackLanguage("en")}]).factory("SettingsService",["$location",function(b){var c={server:"http://"+b.host()+":"+b.port(),browser:"~",dirFirst:!1,browseOrder:"+name",update:8,maxVol:!0,chapters:!0,forward:15,backward:15,audelay:.1,subdelay:.1},d={};return a.forEach(c,function(a,b){this.__defineGetter__(b,function(){var c=localStorage.getItem(b);if(null===c)return a;switch(typeof a){case"boolean":return"true"==c&&(c=!0),"false"==c&&(c=!1),c;case"number":var d=parseFloat(c);return d%1===0&&d<1?a:d<0?a:d;default:case"string":return c||a}}),this.__defineSetter__(b,function(a){localStorage.setItem(b,a)})},d),{defaults:c,settings:d}}]).factory("VLC",["$http","SettingsService","$timeout",function(a,b){var d=b.settings.server,e=function(b,c){return a({method:"GET",url:b,params:c})},f=function(a){return"object"!=typeof a&&(a={command:a}),e(d+"/requests/status.json",a)},g=function(a){return e(d+"/requests/browse.json",{uri:a})},h=function(a){return e(d+"/requests/playlist.json","object"==typeof a?a:a?{command:"pl_empty"}:{})};return{sendCommand:f,Browse:g,Playlist:h}}]).filter("seconds",function(){return function(a){return new Date(1970,0,1).setSeconds(a)}}).filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";"undefined"===typeof b&&(b=1);var c=["bytes","kB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}}).run(["VLC",function(){}]).controller("Settings",["$scope","SettingsService","$window",function(b,c,d){b.settings=c.settings,this.defaults=c.defaults;for(var e=d.document.querySelector("div#settings").getElementsByClassName("toggle"),f=0;f<e.length;f++)e[f].addEventListener("toggle",function(c){var d=a.element(c.target);b.settings[d.attr("id")]=d.hasClass("active")});this.browseOrderOpts=[{id:"+name",value:"+NAME"},{id:"-name",value:"-NAME"},{id:"+modification_time",value:"+MODIFICATION_TIME"},{id:"-modification_time",value:"-MODIFICATION_TIME"},{id:"+creation_time",value:"+CREATION_TIME"},{id:"-creation_time",value:"-CREATION_TIME"},{id:"+access_time",value:"+ACCESS_TIME"},{id:"-access_time",value:"-ACCESS_TIME"}]}]).controller("Playlist",["$scope","VLC",function(b){this.load=function(a){return b.loadPlaylist(a)},this.Add=function(){c=1},this.Play=function(c,d){return d&&a.forEach(d,function(a,b){d[b].current=a.id==c?!0:!1}),b.sendCommand({command:"pl_play",id:c}),!0},this.Clear=function(){(!b.status.state||"stopped"==b.status.state||confirm("Something is currently playing and will be stopped. Would you continue ?"))&&this.load(!0)},this.Delete=function(a){this.load({command:"pl_delete",id:a})},this.Pl=function(a){b.sendCommand("pl_"+a)}}]).controller("Browse",["$scope","VLC","SettingsService","$window",function(a,b,h,i){this.load=function(c){b.Browse(c).then(function(b){a.browse=b.data})},a.ordering=function(a){return".."==a.name?0:1},a.nullOrd=function(){return 1},this.load("file://"+i.encodeURIComponent(h.settings.browser)),this.Play=function(b,d){return"s"==this.Ext(b)?a.sendCommand({command:"addsubtitle",val:d}):(a.sendCommand({command:"in_play",input:b}),void(c--&&a.loadPlaylist()))},this.Queue=function(b){c--?a.loadPlaylist({command:"in_enqueue",input:b}):a.sendCommand({command:"in_enqueue",input:b})},this.Ext=function(a){var b=a.substr(a.lastIndexOf(".")+1).toLowerCase();return d.indexOf(b)>-1?"v":e.indexOf(b)>-1?"a":f.indexOf(b)>-1?"p":g.indexOf(b)>-1?"s":!1},this.searchClick=function(){""!=this.search&&(this.search="")},this.isMRL=function(){return/:\/\//.test(this.search)},this.setDefault=function(a){a=i.decodeURIComponent(a).substr(7),confirm("Would you like to make this directory the default one ?\n\n"+a)&&(h.settings.browser=a)}}]).controller("Status",["$scope","VLC","SettingsService","$filter","$interval","$location","$window",function(b,c,d,e,f,g,h){var i=this;b.loaded=!0,b.status={},b.error=!1,b.confs=d.settings,b.sendCommand=function(a){c.sendCommand(a).then(function(a){b.status=a.data,b.error=!1},function(a){b.error=a})},b.sendCommand({}),b.focused=!0;var j,k=function(){return a.isDefined(j)?!1:void(j=f(b.sendCommand,1e3*d.settings.update,0,!0,{}))};h.addEventListener("blur",function(){f.cancel(j),j=void 0,b.focused=!1}),h.addEventListener("focus",function(){b.sendCommand({}),k(),b.focused=!0}),k(),b.closeModal=function(a){h.document.getElementById(a).classList.remove("active")},this.toggleFullscreen=function(){b.sendCommand("fullscreen")},this.Stop=function(){b.sendCommand("pl_stop")},this.PlayPause=function(){b.sendCommand("playing"==b.status.state?"pl_pause":"pl_play")},this.volIcon=function(a){switch(Math.floor(b.status.volume/2.56/25)){default:case 0:return a?"icon-sound3":"icon-sound4";case 1:case 2:return a?"icon-sound2":"icon-sound3";case 3:case 4:case 5:case 6:case 7:case 8:return a?"icon-sound":"icon-sound2"}},this.Vol=function(a){return b.sendCommand((b.status.volume>=256||b.status.volume>230)&&a&&b.confs.maxVol?{command:"volume",val:256}:b.status.volume<=26&&!a?{command:"volume",val:0}:{command:"volume",val:a?b.status.volume+26:b.status.volume-26})};var l=function(){this.timeout=null,this.pos=function(a){return arguments.length&&(b.status.position=parseFloat(a),i.Seek(this.val)),b.status.position},this.__defineGetter__("val",function(){return Math.round(this.pos()*this.len)}),this.__defineGetter__("len",function(){return b.status.length})};this.pos=new l,this.Seek=function(a){return a===!0&&(a="+"+d.settings.forward+"s"),a===!1&&(a="-"+d.settings.backward+"s"),"undefined"==typeof a?!1:void b.sendCommand({command:"seek",val:a})},this.Chapter=function(a){var c=b.status.information.chapters,e=b.status.information.chapter;if(c.length>1&&d.settings.chapters)if(a){if(e<c.length)return b.sendCommand({command:"chapter",val:e+1})}else if(e>0)return b.sendCommand({command:"chapter",val:e-1});return this.pos.val>d.settings.update&&0==a?this.Seek(0):this.Swipe(a)},this.Swipe=function(a){return b.sendCommand(a?"pl_next":"pl_previous")},this.info={keys:["CONTENT_TYPE","title","artist","album","genre","description","SEASON_SYNOPSIS","SUMMARY","date","ACTOR","CHARACTER","GUESTS","DIRECTOR","PRODUCER","WRITTEN_BY","EXECUTIVE_PRODUCER","DIRECTOR_OF_PHOTOGRAPHY","SOUND_ENGINEER","PRODUCTION_DESIGNER","PRODUCTION_STUDIO","RECORDING_LOCATION"],buildArr:function(){var c=b.status;if(!c.information)return!1;c=c.information.category.meta;var d=[];return a.forEach(this.keys,function(a){if(c[a]){if("CONTENT_TYPE"==a&&c.genre)return d.push({key:c[a],val:c.genre});if(("album"!=a||"TV Show"!=c.CONTENT_TYPE&&"Film"!=c.CONTENT_TYPE)&&("SUMMARY"!=a||"Film"!=c.CONTENT_TYPE))return d.push("title"==a&&c.track_number?c.track_total?{key:a,val:"["+c.track_number+"/"+c.track_total+"] "+c[a]}:{key:a,val:c.track_number+". "+c[a]}:"date"==a?{key:a,val:e("date")(c[a],"longDate")}:{key:a,val:c[a]})}}),this.infos=d,d},infos:[]},b.$watch("status",function(a,b){a.information&&b.information&&a.information.category.meta.filename==b.information.category.meta.filename&&Object.keys(a.information.category).length==Object.keys(b.information.category).length||(i.info.buildArr(),i.streams.buildArr())}),this.streams={buildArr:function(){var c=b.status;return c.information?(c=c.information.category,this.streams=[],this.keyTranslations=[["T","Type","Type_","Typ","Tipo"],["C","Codec","Codec_","C\xf3dec","Codifica","Kodek"],["L","Language","Langue_","Sprache","Idioma","Lingua","Taal","Linguagem","Wyb\xf3r_j\u0119zyka"],["Ch","Channels","Canaux_","Canales","Kan\xe4le","Canali","Kanalen","Canais","Kana\u0142y"],["B","Bitrate","Tasa_de_bits","Przep\u0142ywno\u015b\u0107"]],this.TypeTranslations=[["V","Video","Vid\xe9o","V\xeddeo","Obraz"],["A","Audio","Audio","\xc1udio","D\u017awi\u0119k"],["S","Subtitle","Sous-titres","Sous-titres ","Subt\xedtulo","Untertitel","Sottotitolo","Ondertitel","Legenda","Napisy"]],this.findTranslation=function(b){var c=this.keyTranslations,d=this.TypeTranslations;return a.forEach(b,function(a,e){for(var f=0;f<c.length;f++)if(-1!=c[f].indexOf(e)){if("T"==c[f][0])for(var g=0;g<d.length;g++)-1!=d[g].indexOf(a)&&(b.TT=a,a=d[g][0]);b[c[f][0]]=a}},this),b},void a.forEach(c,function(a,b){var c=b.match(/[0-9]+$/);return null!=c&&(this.streams[c[0]]=this.findTranslation(a)),!0},this)):!1},streams:[],select:function(a){b.sendCommand({command:-1==a||"S"==this.streams[a].T?"subtitle_track":"audio_track",val:a})}},this.Rate=function(a){var c=Math.round(100*b.status.rate+100*a)/100;return c<.25||c>10?!1:void b.sendCommand({command:"rate",val:c})},this.Delay=function(a,c){var e="a"==c?b.status.audiodelay:b.status.subtitledelay,f="a"==c?d.settings.audelay:d.settings.subdelay;b.sendCommand({command:"a"==c?"audiodelay":"subdelay",val:Math.round(1e3*(e+=a?f:-1*f))/1e3})};var m=function(){a.element(h.document.getElementById("enableEq")).on("toggle",function(){b.sendCommand({command:"enableeq",val:a.element(this).hasClass("active")?1:0})});var c=this;this.enabled=function(c){return!a.isUndefined(b.status.equalizer)&&a.isArray(b.status.equalizer)?!1:"object"==typeof b.status.equalizer&&"undefined"!=typeof c?b.status.equalizer.hasOwnProperty(c):!0},this.timeout=null,this.setter=function(a,c){b.sendCommand("object"==typeof a?a:{command:a,val:c})},this.__defineGetter__("preamp",function(){return b.status.equalizer?this.enabled()?b.status.equalizer.preamp:0:!1}),this.__defineSetter__("preamp",function(a){return this.enabled()?(b.status.equalizer.preamp=parseFloat(a),void this.setter("preamp",this.preamp)):!1}),this.prsts=[],this.__defineGetter__("presets",function(){return b.status.equalizer&&this.enabled()?(this.prsts.length<1&&b.status.equalizer.presets&&a.forEach(b.status.equalizer.presets,function(a,b){/[0-9]+/.test(b)&&this.prsts.push({id:b.match(/[0-9]+/)[0],val:a})},this),this.prsts):!1}),this.__defineSetter__("presets",function(a){this.setter("setpreset",a)}),this._b=["60Hz","170Hz","310Hz","600Hz","1kHz","3kHz","6kHz","12kHz","14kHz","16kHz"],this.bands=[],a.forEach(this._b,function(a,d){this.bands.push({id:d,fq:a,val:function(a){return b.status.equalizer&&c.enabled()?(arguments.length&&c.setter({command:"equalizer",band:d,val:a}),arguments.length?b.status.equalizer.bands['band id="'+d+'"']=a:b.status.equalizer.bands['band id="'+d+'"']):0}})},this)};this.EQ=new m,b.loadPlaylist=function(a){c.Playlist(a).then(function(a){b.playlist=a.data.children})}}]).directive("resize",["$window",function(b){return function(c){var f=b.document.querySelector(".bar-footer-secondary .btn.control-item.pull-left"),g=b.document.querySelector(".bar-footer-secondary .btn.control-item.pull-right");c.$watch(function(){return{w:b.innerWidth,l:f.clientWidth,r:g.clientWidth}},function(a){c.sliderSize=function(){return{width:a.w-46-a.r-a.l+"px"}}},!0),a.element(b).on("resize",function(){c.$apply()}),a.element(b.document).ready(function(){c.$apply()})}}]).directive("fallbackSrc",function(){var b={link:function(b,c,d){c.bind("error",function(){a.element(this).attr("src",d.fallbackSrc)})}};return b}),0),d=["asf","avi","divx","drc","dv","f4v","flv","gxf","iso","m1v","m2v","m2t","m2ts","m4v","mkv","mov","mp2","mp4","mpeg","mpeg1","mpeg2","mpeg4","mpg","mts","mtv","mxf","mxg","nuv","ogg","ogm","ogv","ogx","ps","rec","rm","rmvb","ts","vob","wmv","xesc","webm"],e=["3ga","a52","aac","ac3","ape","awb","dts","flac","it","m4a","m4p","mka","mlp","mod","mp1","mp2","mp3","oga","ogg","oma","s3m","spx","thd","tta","wav","wma","wv","xm"],f=["asx","b4s","cue","ifo","m3u","m3u8","pls","ram","sdp","vlc","xspf"],g=["srt","idx","ass","ssa","sup"]}(angular);
